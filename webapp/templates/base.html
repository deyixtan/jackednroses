{% extends "bootstrap/base.html" %}
{% from "bootstrap/nav.html" import render_nav_item %}
{% from "bootstrap/utils.html" import render_messages %}

{% block title %}{{ title }}{% endblock %}

{% block navbar %}
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="navbar-nav mr-auto">
            {{ render_nav_item("core.index", "Home") }}
            {% if current_user.is_authenticated %}
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Modules</a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                    {% for module in current_user.modules.all() %}
                    <a class="dropdown-item" href="{{ url_for('luminus.index', module_index=loop.index-1) }}">{{ module.get_formatted_name() }}</a>
                    {% endfor %}
                </div>
            </li>
            {% endif %}
        </div>
        <div class="navbar-nav navbar-right">
            {% if current_user.is_authenticated %}
            {{ render_nav_item("core.account", current_user.profile.get_full_name()) }}
            {{ render_nav_item("users.logout", "Logout") }}
            {% endif %}
        </div>
    </nav>
{% endblock %}

{% block messages %} 
    {{ render_messages() }}
{% endblock %}

{% block content %}
    {% block app_content %}{% endblock %}
{% endblock %}

{% block scripts %}
    {{ super() }}
    {{ moment.include_moment() }}
{% endblock %}
